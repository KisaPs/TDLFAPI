# Схема предыдущей разработки, с небольшими изменениями
<img width="148" height="142" alt="600008557279b2" src="https://github.com/user-attachments/assets/05c2a677-ce15-4d80-a85b-52e6f57c410f" />


## Общие положения

Передаваемые документы имеют общее свойство с значениями:
"Статус" - "Записан","Проведен", "Помечен на удаление"


### BaseUrl 
```http
  95.161.174.210/ut11.5.23/hs/api
  or
  api.tdlf.ru/ut11.5.23/hs/api
```

[Описание работы на стороне ТДЛФ](Target/README.md)

### Адрес метода проверки доступности сервиса 
```http
  GET /ping
```

### Адрес метода получения заказов 
```http
  GET /GetInvoiceIFZ
``` 

При обращении к методу, в ответ будет отправлен список Заказов, которые не были выгружены и по которым не получен сигнал о том, что они получены другой стороной
<details>
<summary><b>Пример положительного ответа сервиса</b> (нажмите, чтобы развернуть)</summary>

```diff
{
  "ЗаказыДляИФЗ": [
    {
-     "УникальныйИдентификаторЗаказа": "0a276748-5f58-11ed-bd7a-d4f5ef7885bf",
+     "УникальныйИдентификаторЗаказаТДЛФ": "0a276748-5f58-11ed-bd7a-d4f5ef7885bf",
      "ОрганизацияЗаказчикИНН": "7817064607",
      "Комментарий": "Заказ на склад",
      "СписокТоваровВЗаказе": [
        {
          "НаименованиеТовара": "ЧАШ.С БЛ.Чер.кофеТонкие веточ.с отв.КН1",
          "АртикулТовара": "81.13635.00.1",
          "КоличествоТовара": 5
        },
        {
          "НаименованиеТовара": "СК-РА Заяц с морковкой 4 МЛ1",
          "АртикулТовара": "82.01965.00.1",
          "КоличествоТовара": 3
        },
        {
          "НаименованиеТовара": "ЧАШ.С БЛ.коф.Тюльп.Кобальтовая сеткаТЛ1",
          "АртикулТовара": "81.10106.00.1",
          "КоличествоТовара": 7
        }
      ]
    },
    {
-     "УникальныйИдентификаторЗаказа": "0a276748-5f58-11ed-bd7a-d4f5ef7885bf",
+     "УникальныйИдентификаторЗаказаТДЛФ": "0a276748-5f58-11ed-bd7a-d4f5ef7885bf",
      "ОрганизацияЗаказчикИНН": "7817064607",
      "Комментарий": "Заказ на склад",
      "СписокТоваровВЗаказе": [
        {
          "НаименованиеТовара": "Vitax Термос VX-3418 1500мл Active Prime in travel",
          "АртикулТовара": "VX-3418",
          "КоличествоТовара": 1
        }
      ]
    },
    {
-     "УникальныйИдентификаторЗаказа": "0a276748-5f58-11ed-bd7a-d4f5ef7885bf",
+     "УникальныйИдентификаторЗаказаТДЛФ": "0a276748-5f58-11ed-bd7a-d4f5ef7885bf",
      "ОрганизацияЗаказчикИНН": "7817064607",
      "Комментарий": "Заказ на склад",
      "СписокТоваровВЗаказе": [
        {
          "НаименованиеТовара": "ЧАШ.С БЛ.чайн.ГвоздикаЗолотой кантик7КН1",
          "АртикулТовара": "81.13929.00.1",
          "КоличествоТовара": 1
        },
        {
          "НаименованиеТовара": "ЧАШКА С БЛЮДЦЕМ чайн. Тюльпан Сетка-Блюз 2 ТН1",
          "АртикулТовара": "81.24812.00.1",
          "КоличествоТовара": 3
        }
      ]
    }
  ]
}
```
</details>

"ОрганизацияЗаказчикИНН" – ИНН организации заказчика (например ЛОМОНОСОВСКИЙ ФАРФОР СПБ ООО)

Будет отправлен массив в формате json со списком заказов. В каждом заказе будет содержаться «УникальныйИдентификаторЗаказа», который необходимо хранить, т.к. по нему будет отменяться дальнейшая выгрузка, плюс к нему нужно будет привязать Поступление (Реализацию на стороне ИФЗ), об этом будет рассказано ниже.

Если на текущий момент нет заказов для отправки, то сервис вернет строку:

"НетЗаказовДляВыгрузкиИФЗ"

### Адрес для отправки списка заказов в формате json
```http
  POST /InvoiceReceivedIFZ
``` 
<details>
<summary><b> Пример POST запроса в формате JSON:</b> (нажмите, чтобы развернуть)</summary>

```diff
{
  "ЗаказыПолученныеИФЗ": [
    {
      "Статус": "Записан",
-      "УникальныйИдентификаторЗаказа": "0a276748-5f58-11ed-bd7a-d4f5ef7885bf",
+      "УникальныйИдентификаторЗаказаТДЛФ": "0a276748-5f58-11ed-bd7a-d4f5ef7885bf",
+      "УникальныйИдентификаторЗаказаИФЗ": "5sdg78w-dfh3-sdg3-3dfh-adgsdg3wewq",
+      "Комментарий": "Заказчик 1",
+      "НомерЗаказаИФЗ":"5555"
      "СписокТоваровКЗаказу": [
        {
          "НаименованиеТовара": "ЧАШ.С БЛ.Чер.кофеТонкие веточ.с отв.КН1",
          "АртикулТовара": "81.13635.00.1",
          "КоличествоТовара": 5,
          "ЦенаТовараИФЗ": 55,
          "НДС": 20,
          "СуммаНДС":46.2,
          "СуммаСНДС":231,
-         "Комментарий": "Заказчик 1",
-         "НомерЗаказаИФЗ":"5555"
        },
        {
          "НаименованиеТовара": "СК-РА Заяц с морковкой 4 МЛ1",
          "АртикулТовара": "82.01965.00.1",
          "КоличествоТовара": 3,
          "ЦенаТовараИФЗ": 77,
          "НДС": 20,
          "СуммаНДС":46.2,
          "СуммаСНДС":231,
-         "Комментарий": "Заказчик 1",
-         "НомерЗаказаИФЗ":"5555"
        },
        {
          "НаименованиеТовара": "ЧАШ.С БЛ.коф.Тюльп.Кобальтовая сеткаТЛ1",
          "АртикулТовара": "81.10106.00.1",
          "КоличествоТовара": 7,
          "ЦенаТовараИФЗ": 33,
          "НДС": 20,
          "СуммаНДС":46.2,
          "СуммаСНДС":231,
-         "Комментарий": "Заказчик 1",
-         "НомерЗаказаИФЗ":"5555"
        }
      ]
    },
    {
      "Статус": "Записан",
-      "УникальныйИдентификаторЗаказа": "0a276748-5f58-11ed-bd7a-d4f5ef7885bf",
+      "УникальныйИдентификаторЗаказаТДЛФ": "0a276748-5f58-11ed-bd7a-d4f5ef7885bf",
+      "УникальныйИдентификаторЗаказаИФЗ": "5sdg78w-dfh3-sdg3-3dfh-adgsdg3wewq",
+      "Комментарий": "Заказчик 1",
+      "НомерЗаказаИФЗ":"5555"
      "СписокТоваровКЗаказу": [
        {
          "НаименованиеТовара": "ЧАШ.С БЛ.чайн.ГвоздикаЗолотой кантик7КН1",
          "АртикулТовара": "81.13929.00.1",
          "КоличествоТовара": 1,
          "ЦенаТовараИФЗ": 22,
          "НДС": 20,
          "СуммаНДС":46.2,
          "СуммаСНДС":231,
-         "Комментарий": "Заказчик 1",
-         "НомерЗаказаИФЗ":"5555"
        },
        {
          "НаименованиеТовара": "ЧАШКА С БЛЮДЦЕМ чайн. Тюльпан Сетка-Блюз 2 ТН1",
          "АртикулТовара": "81.24812.00.1",
          "КоличествоТовара": 3,
          "ЦенаТовараИФЗ": 44,
          "НДС": 20,
          "СуммаНДС":46.2,
          "СуммаСНДС":231,
-         "Комментарий": "Заказчик 1",
-         "НомерЗаказаИФЗ":"5555"
        }
      ]
    }
  ]
}

```

</details>

Заказы которые были получены и которые необходимо снять с регистрации на дальнейшую выгрузку, а так-же передать список товаров с ценами и информацией о НДС товаров

> [!WARNING]
> "ЦенаТовараИФЗ": 55 НДС Включен или нет?.

После отправки запроса, заказы из списка больше выгружаться не будут.

<details>
<summary><b> Пример положительного ответа сервиса на запрос списка заказов (InvoiceReceivedIFZ):</b> (нажмите, чтобы развернуть)</summary>

```diff
{
  "ЗаказыДляИФЗ": [
    {
-     "УникальныйИдентификаторЗаказа": "0a276748-5f58-11ed-bd7a-d4f5ef7885bf",
+     "УникальныйИдентификаторЗаказаТДЛФ": "0a276748-5f58-11ed-bd7a-d4f5ef7885bf",
      "СтатусОтменыВыгрузки": "ОК"
    },
    {
-     "УникальныйИдентификаторЗаказа": "0a276748-5f58-11ed-bd7a-d4f5ef7885bf",
+     "УникальныйИдентификаторЗаказаТДЛФ": "0a276748-5f58-11ed-bd7a-d4f5ef7885bf",
      "СтатусОтменыВыгрузки": "ОК"
    }
  ]
}

```

</details>

### Адрес для отправки списка отгрузок в формате json, которые связанны с заказами полученными ранее

```http
POST PostShipmentIFZ
```

<details>
<summary><b> Пример POST запроса в формате JSON:</b> (нажмите, чтобы развернуть)</summary>

```diff
{
  "ОтгрузкиИФЗ": [
    {
      "Статус": "Записан",
-     "УникальныйИдентификаторЗаказа": "0a276748-5f58-11ed-bd7a-d4f5ef7885bf",
+     "УникальныйИдентификаторЗаказаТДЛФ": "0a276748-5f58-11ed-bd7a-d4f5ef7885bf",
+     "УникальныйИдентификаторРеализацииИФЗ": "6s98756-8h45-99es-hr7a-l4f9uy5664we",
+     "НомерРеализацииИФЗ": "12345",
+     "НомерЗаказаИФЗ": "5555",
+     "ДатаДокумента": "01.01.2025 20:01:03",
      "СписокТоваровКОтгрузке": [
        {
          "НаименованиеТовара": "ЧАШ.С БЛ.Чер.кофеТонкие веточ.с отв.КН1",
          "АртикулТовара": "81.13635.00.1",
          "КоличествоТовара": 5,
          "ЦенаТовараИФЗ": 55,
          "НДС": 20,
          "СуммаНДС":46.2,
          "СуммаСНДС":231,
-         "Комментарий": "Заказчик 1",
-         "НомерЗаказаИФЗ":"5555"
        },
        {
          "НаименованиеТовара": "СК-РА Заяц с морковкой 4 МЛ1",
          "АртикулТовара": "82.01965.00.1",
          "КоличествоТовара": 3,
          "ЦенаТовараИФЗ": 77,
          "НДС": 20,
          "СуммаНДС":46.2,
          "СуммаСНДС":231,
-         "Комментарий": "Заказчик 1",
-         "НомерЗаказаИФЗ":"5555"

        },
        {
          "НаименованиеТовара": "ЧАШ.С БЛ.коф.Тюльп.Кобальтовая сеткаТЛ1",
          "АртикулТовара": "81.10106.00.1",
          "КоличествоТовара": 7,
          "ЦенаТовараИФЗ": 33,
          "НДС": 20,
          "СуммаНДС":46.2,
          "СуммаСНДС":231,
-         "Комментарий": "Заказчик 1",
-         "НомерЗаказаИФЗ":"5555"
        }
      ]
    },
    {
      "Статус": "Записан",
-     "УникальныйИдентификаторЗаказа": "0a276748-5f58-11ed-bd7a-d4f5ef7885bf",
+     "УникальныйИдентификаторЗаказаТДЛФ": "0a276748-5f58-11ed-bd7a-d4f5ef7885bf",
+     "УникальныйИдентификаторРеализацииИФЗ": "b9327d37-0646-4b69-9afe-c70195b48159",
+     "НомерРеализацииИФЗ": "12340",
+     "НомерЗаказаИФЗ": "7777",
+     "ДатаДокумента": "01.09.2024 20:01:03",
+     "Комментарий": "Заказчик 1",
      "СписокТоваровКОтгрузке": [
        {
          "НаименованиеТовара": "ЧАШ.С БЛ.чайн.ГвоздикаЗолотой кантик7КН1",
          "АртикулТовара": "81.13929.00.1",
          "КоличествоТовара": 1,
          "ЦенаТовараИФЗ": 22,
          "НДС": 20,
          "СуммаНДС":46.2,
          "СуммаСНДС":231,
-         "Комментарий": "Заказчик 1",
-         "НомерЗаказаИФЗ":"5555"
        },
        {
          "НаименованиеТовара": "ЧАШКА С БЛЮДЦЕМ чайн. Тюльпан Сетка-Блюз 2 ТН1",
          "АртикулТовара": "81.24812.00.1",
          "КоличествоТовара": 3,
          "ЦенаТовараИФЗ": 44,
          "НДС": 20,
          "СуммаНДС":46.2,
          "СуммаСНДС":231,
-         "Комментарий": "Заказчик 1",
-         "НомерЗаказаИФЗ":"5555"
        }
      ]
    }
  ]
}



```

</details>

"ЦенаТовараИФЗ" – Цена, по которой ИФЗ продает товар компании Ломаносовский фарфор.

<details>
<summary><b> Пример положительного ответа сервиса на запрос списка заказов (PostShipmentIFZ):</b> (нажмите, чтобы развернуть)</summary>

```diff
{
  "ОтгрузкиПоЗаказамИФЗ": [
    {
-     "УникальныйИдентификаторЗаказа": "0a276748-5f58-11ed-bd7a-d4f5ef7885bf",
+     "УникальныйИдентификаторЗаказаТДЛФ": "0a276748-5f58-11ed-bd7a-d4f5ef7885bf",
      "СтатусПолученияОтгрузки": "Проведен"
    },
    {
-     "УникальныйИдентификаторЗаказа": "108b7352-61d1-11ed-bd7a-d4f5ef7885bf",
+     "УникальныйИдентификаторЗаказаТДЛФ": "0a276748-5f58-11ed-bd7a-d4f5ef7885bf",
      "СтатусПолученияОтгрузки": "Проведен"
    }
  ]
}


```

</details>

### Адрес для отправки остатков товаров в формате json
```http
POST PostStockIFZ
```

<details>
<summary><b> Пример POST запроса в формате JSON:</b> (нажмите, чтобы развернуть)</summary>

```diff
{
  "ОстаткиТоваровИФЗ": [
    {
      "Склад": "Спецзаказы",
+     "КодСклада": "2d32f04e-c0dd-4673-9464-76bf4d86b872",
      "НаименованиеТовара": "ЧАШ.С БЛ.чайн.ГвоздикаЗолотой кантик7КН1",
      "АртикулТовара": "81.13929.00.1",
      "КоличествоТовара": 1,
      "ВРезерве": 1,
      "Доступно": 0
    },
    {
      "Склад": "ИФЗ",
+     "КодСклада": "b375b10e-d0d3-4ba1-bf5c-de3f0e9bde67",
      "НаименованиеТовара": "ЧАШКА С БЛЮДЦЕМ чайн. Тюльпан Сетка-Блюз 2 ТН1",
      "АртикулТовара": "81.24812.00.1",
      "КоличествоТовара": 3,
      "ВРезерве": 1,
      "Доступно": 2
    }
  ]
}

```

</details>

<details>
<summary><b> Пример положительного ответа сервиса на запрос списка заказов (PostStockIFZ):</b> (нажмите, чтобы развернуть)</summary>

```diff
{
  "ОстаткиТоваровИФЗ": [
    {
      "СтатусПолученияОстатков": "Проведен"
    }
  ]
}

```

</details>


# Нет реализаций.
* Товаров
* Цен и скидок
* Сборок

# Возможные проблемы
Изменение документов, либо не выгружаются, либо приведут к ошибкам.
